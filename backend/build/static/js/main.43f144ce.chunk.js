(this["webpackJsonpbloglist-frontend"]=this["webpackJsonpbloglist-frontend"]||[]).push([[0],{71:function(e,t,a){e.exports=a(98)},97:function(e,t,a){},98:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(10),c=a.n(o),l=a(8),i=a.n(l),u=a(13),s=a(11),m=a(19),p=a.n(m),d="/api/blogs",f=null,g=function(){var e=Object(u.a)(i.a.mark((function e(t){var a,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={headers:{Authorization:f}},e.next=3,p.a.post(d,t,a);case 3:return n=e.sent,e.abrupt("return",n.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),v=function(){var e=Object(u.a)(i.a.mark((function e(t){var a,n,r,o;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.id,n=d+"/"+a,r={description:t.description,user:t.user.id,likes:t.likes+1,author:t.author,title:t.title,url:t.url,comments:t.comments},e.next=5,p.a.put(n,r);case 5:return o=e.sent,e.abrupt("return",o.data);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),b=function(){var e=Object(u.a)(i.a.mark((function e(t,a){var n,r,o,c,l;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.id,r=d+"/"+n,o=t.comments.concat(a),c={description:t.description,user:t.user.id,likes:t.likes,author:t.author,title:t.title,url:t.url,comments:o},e.next=6,p.a.put(r,c);case 6:return l=e.sent,console.log(l.data),e.abrupt("return",l.data);case 9:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),h={getAll:function(){return p.a.get(d).then((function(e){return e.data}))},create:g,setToken:function(e){f="bearer ".concat(e)},likePost:v,deletePost:function(){var e=Object(u.a)(i.a.mark((function e(t){var a,n,r,o;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.id,n=d+"/"+a,r={headers:{Authorization:f}},!window.confirm("Remove blog ".concat(t.title," by ").concat(t.author))){e.next=8;break}return e.next=6,p.a.delete(n,r);case 6:return o=e.sent,e.abrupt("return",o.data);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),commentPost:b},E=a(33),y=a(136),w=a(137),k=a(138),O=a(135),j=a(131),x=a(134),C=function(e){var t=e.comment;return r.a.createElement(j.a,{alignItems:"flex-start"},r.a.createElement(x.a,{primary:t}))},S=a(143),B=a(144),N=Object(O.a)((function(e){return{margin:{margin:e.spacing(1)},extendedIcon:{marginRight:e.spacing(1)}}})),T=function(e){var t=e.blog,a=e.deletePost,o=Object(n.useState)(!1),c=Object(s.a)(o,2),l=c[0],m=c[1],p=Object(n.useState)(t.likes),d=Object(s.a)(p,2),f=d[0],g=d[1],v=Object(n.useState)(""),b=Object(s.a)(v,2),O=b[0],j=b[1],x=Object(n.useState)(t.comments),T=Object(s.a)(x,2),A=T[0],P=T[1],I={display:l?"none":""},R={display:l?"":"none",marginLeft:5,marginBottom:5},z=function(){m(!l)},D=function(){var e=Object(u.a)(i.a.mark((function e(){var a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.likePost(t);case 2:a=e.sent,g(a.likes);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),L=function(){var e=Object(u.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a(t);case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),V=function(){var e=Object(u.a)(i.a.mark((function e(){var a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.commentPost(t,O);case 2:a=e.sent,console.log(a),j(""),P(a.comments);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),W=N();return r.a.createElement("div",{style:{paddingTop:10,paddingLeft:2,marginBottom:5,marginTop:5,marginLeft:5,marginRight:5,backgroundColor:"#3b4252",borderRadius:"25px",color:"#81a1c1"}},r.a.createElement("div",{style:I},r.a.createElement(E.a,{variant:"h4",gutterBottom:!0},t.title),t.author,r.a.createElement(y.a,{size:"small",variant:"contained",color:"primary",className:W.margin,onClick:z},"view")),r.a.createElement("div",{style:R},r.a.createElement(E.a,{variant:"h5",gutterBottom:!0},t.title),t.author,r.a.createElement(y.a,{size:"small",variant:"contained",color:"primary",className:W.margin,onClick:z},"hide"),r.a.createElement("p",null,r.a.createElement(E.a,{variant:"body2",display:"block",gutterBottom:!0},r.a.createElement(B.a,{fontStyle:"italic",m:1},t.description)),r.a.createElement(E.a,{variant:"caption",display:"block",gutterBottom:!0},"url: ",r.a.createElement("a",{href:t.url,style:{color:"white"}},t.url)),r.a.createElement(E.a,{variant:"caption",display:"block",gutterBottom:!0},"likes: ",f," ",r.a.createElement(y.a,{size:"small",variant:"contained",color:"primary",className:W.margin,onClick:D},"like")),r.a.createElement(E.a,{variant:"caption",display:"block",gutterBottom:!0},"posted by: ",t.user.username),r.a.createElement(y.a,{size:"small",variant:"contained",color:"primary",className:W.margin,onClick:L},"remove"),r.a.createElement("br",null),r.a.createElement(S.a,{id:"Add comment",label:"Add comment",multiline:!0,rows:4,defaultValue:"Add comment",variant:"outlined",onChange:function(e){var t=e.target;return j(t.value)}}),r.a.createElement(y.a,{size:"small",variant:"contained",color:"primary",className:W.margin,onClick:V},"Add comment"),r.a.createElement(E.a,{variant:"h6",gutterBottom:!0},"Comments"),r.a.createElement(w.a,null,A.map((function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement(C,{comment:e})," ",r.a.createElement(k.a,null)," ")}))))))},A=function(e){var t=e.blogs,a=e.removeBlog;return console.log(t),console.log("repeatetion???"),r.a.createElement("div",null,r.a.createElement(E.a,{variant:"h2",gutterBottom:!0},"Blogs"),t.map((function(e){return r.a.createElement(T,{key:e.id,blog:e,deletePost:a})})))},P={login:function(){var e=Object(u.a)(i.a.mark((function e(t){var a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.a.post("/api/login",t);case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},I=function(e){var t=e.message,a=e.isError;return null===t?null:a?r.a.createElement("div",{className:"error"},t):r.a.createElement("div",{className:"notification"},t)},R=Object(O.a)((function(e){return{root:{"& > *":{margin:e.spacing(1)}}}})),z=r.a.forwardRef((function(e,t){var a=Object(n.useState)(!1),o=Object(s.a)(a,2),c=o[0],l=o[1],i={display:c?"none":""},u={display:c?"":"none"},m=function(){l(!c)};Object(n.useImperativeHandle)(t,(function(){return{toggleVisibility:m}}));var p=R();return r.a.createElement("div",{classname:p.root},r.a.createElement("div",{style:i},r.a.createElement(y.a,{variant:"outlined",onClick:m},e.buttonLabel)),r.a.createElement("div",{style:u},e.children,r.a.createElement(y.a,{variant:"outlined",onClick:m},"cancel")))})),D=Object(O.a)((function(e){return{root:{"& .MuiTextField-root":{margin:e.spacing(1),width:"25ch"}}}})),L=function(e){var t=e.addBlog,a=e.user,o=Object(n.useState)(""),c=Object(s.a)(o,2),l=c[0],i=c[1],u=Object(n.useState)(""),m=Object(s.a)(u,2),p=m[0],d=m[1],f=Object(n.useState)(),g=Object(s.a)(f,2),v=g[0],b=g[1],h=D();return r.a.createElement("form",{className:h.root,onSubmit:function(e){e.preventDefault(),t({title:l,user:a,url:p,description:v,comments:[]}),i(""),d("")}},r.a.createElement("div",null,r.a.createElement(S.a,{id:"standard-title-input",label:"title",type:"title",autoComplete:"title",onChange:function(e){var t=e.target;return i(t.value)}}),r.a.createElement("br",null),r.a.createElement(S.a,{id:"standard-url-input",label:"url",type:"url",autoComplete:"url",onChange:function(e){var t=e.target;return d(t.value)}}),r.a.createElement("br",null),r.a.createElement(S.a,{id:"description",label:"Description",multiline:!0,rows:4,defaultValue:"Add description",variant:"outlined",onChange:function(e){var t=e.target;return b(t.value)}}),r.a.createElement("br",null),r.a.createElement(y.a,{variant:"outlined",type:"submit"},"create blog")))},V={register:function(){var e=Object(u.a)(i.a.mark((function e(t){var a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.a.post("/api/users",t);case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},W=a(146),F=a(141),J=a(142),U=a(145),q=a(139),H=a(140),M=function(){var e=Object(n.useState)([]),t=Object(s.a)(e,2),a=t[0],o=t[1],c=Object(n.useState)(""),l=Object(s.a)(c,2),m=l[0],p=l[1],d=Object(n.useState)(""),f=Object(s.a)(d,2),g=f[0],v=f[1],b=Object(n.useState)(null),w=Object(s.a)(b,2),k=w[0],j=w[1],x=Object(n.useRef)(),C=Object(n.useState)([null,null]),N=Object(s.a)(C,2),T=N[0],R=N[1];Object(n.useEffect)((function(){h.getAll().then((function(e){return o(e)}))}),[a]);var D=function(){var e=Object(u.a)(i.a.mark((function e(t){var a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=2,console.log("logging in with",m,g),e.next=6,P.login({username:m,password:g});case 6:a=e.sent,window.localStorage.setItem("loggedBlogUser",JSON.stringify(a)),h.setToken(a.token),p(""),v(""),j(a),e.next=19;break;case 14:e.prev=14,e.t0=e.catch(2),console.log(e.t0),R(["wrong username or password",!0]),setTimeout((function(){R([null,null])}),5e3);case 19:case"end":return e.stop()}}),e,null,[[2,14]])})));return function(t){return e.apply(this,arguments)}}(),M=function(){var e=Object(u.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,console.log("registering with",m,g),e.next=5,V.register({username:m,password:g});case 5:e.sent,p(""),v(""),R(["user successfully created",!1]),setTimeout((function(){R([null,null])}),5e3),e.next=17;break;case 12:e.prev=12,e.t0=e.catch(1),console.log(e.t0),R(["username taken",!0]),setTimeout((function(){R([null,null])}),5e3);case 17:case"end":return e.stop()}}),e,null,[[1,12]])})));return function(t){return e.apply(this,arguments)}}(),Y=function(e){x.current.toggleVisibility(),h.create(e).then((function(e){return h.getAll().then((function(e){return o(e)}))})),R(["a new blog ".concat(e.title," by ").concat(e.user.username),!1]),setTimeout((function(){return R([null,null])}),5e3)},G=function(){var e=Object(u.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,h.deletePost(t);case 3:e.sent,h.getAll().then((function(e){return o(e)})),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),R(["have to be original user to delete blog",!0]),setTimeout((function(){return R([null,null])}),5e3);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}();function K(){return r.a.createElement(E.a,{variant:"body2",color:"textSecondary",align:"center"},"Copyright \xa9 ",r.a.createElement(q.a,{color:"inherit",href:"https://material-ui.com/"},"BlogShare")," ",(new Date).getFullYear(),".")}var Q=Object(O.a)((function(e){return{paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)}}}))();return r.a.createElement("div",null,r.a.createElement(I,{message:T[0],isError:T[1]}),null===k?r.a.createElement(H.a,{component:"div",maxWidth:"xs"},r.a.createElement(F.a,null),r.a.createElement("div",{className:Q.paper},r.a.createElement(W.a,{className:Q.avatar}),r.a.createElement(E.a,{component:"h1",variant:"h5"},"Sign in"),r.a.createElement("form",{className:Q.form,noValidate:!0},r.a.createElement(S.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"username",label:"Username",name:"username",autoComplete:"username",onChange:function(e){var t=e.target;return p(t.value)},autoFocus:!0}),r.a.createElement(S.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"current-password",onChange:function(e){var t=e.target;return v(t.value)}}),r.a.createElement(J.a,{control:r.a.createElement(U.a,{value:"remember",color:"primary"}),label:"Remember me"}),r.a.createElement(y.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:Q.submit,onClick:D},"Sign In"),r.a.createElement(y.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:Q.submit,onClick:M},"Register")),r.a.createElement(E.a,{variant:"caption"},"use username: user,  password: password if you do not want to create an account")),r.a.createElement(B.a,{mt:8},r.a.createElement(K,null))):r.a.createElement("div",null,r.a.createElement(E.a,{variant:"h6"},"welcome back ",k.username),r.a.createElement(y.a,{variant:"outlined",onClick:function(e){e.preventDefault(),window.localStorage.removeItem("loggedBlogUser"),h.setToken(null),j(null)}},"logout"),r.a.createElement(z,{buttonLabel:"new post",ref:x},r.a.createElement(L,{addBlog:Y,user:k})),r.a.createElement(A,{blogs:a,removeBlog:G})))};a(97);c.a.render(r.a.createElement(M,null),document.getElementById("root"))}},[[71,1,2]]]);
//# sourceMappingURL=main.43f144ce.chunk.js.map